rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // Les produits peuvent être lus par tout le monde, mais seuls les admins peuvent les modifier
    match /products/{productId} {
      allow read: if true;
      allow write: if request.auth != null;
    }

    // Les témoignages peuvent être lus par tout le monde, mais seuls les admins peuvent les gérer
    match /testimonials/{testimonialId} {
      allow read: if true;
      allow create, update, delete: if request.auth != null;
    }
    
    // Seuls les admins peuvent gérer les achats
    match /purchases/{purchaseId} {
      allow read, write: if request.auth != null;
    }

    // N'importe qui peut créer, lire et mettre à jour une commande avec son ID.
    // Seul un admin peut supprimer une commande.
    match /orders/{orderId} {
      allow create, read, update: if true;
      allow delete: if request.auth != null;
    }
  }
}